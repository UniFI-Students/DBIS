#ENTITIES:


#ACCOUNT:

create table if not exists Account(
ID int primary key,
Login char(10) not null,
Password int not null,
Type enum('Patient','Employer') not null
)engine=innoDB;

#PATIENT:

create table if not exists Patient(
PC char(16) primary key,
Name char(10) not null,
Surname char(10) not null,
BirthDate date not null,     
Street char (15) not null,
City char(10) not null,
Country char(10) not null,
PostCode int not null,
AccountId int,
foreign key (AccountId) references Account(ID)
) engine=innoDB;


#EMPLOYER:

create table if not exists Employer (
PC char(16) primary key,
Name char(10) not null,
Surname char(10) not null,
BirthDate date not null,
AccountId int,
foreign key (AccountId) references Account(ID)
) engine=innoDB;

#SPECIALIZATION:

create table if not exists Specialization(
ID int primary key,
Name char(10) not null
) engine=innoDB;

#MEDIC:

create table if not exists Medic(
EmployerPC char(16) primary key,
foreign key(EmployerPC) references Employer(PC),
SpecializationID int not null,
foreign key(SpecializationID) references Specialization(ID)
)engine=innoDB;

#ADMINISTRATOR:

create table if not exists Administrator(
EmployerPC char(16) primary key,
foreign key(EmployerPC) references Employer(PC),
AdministratorType int not null
)engine=innoDB;

#CLINIC:

create table if not exists Clinic(
ID int primary key,
Street char (15) not null,
City char(10) not null,
Country char(10) not null,
PostCode int not null
)engine=innoDB;

#CURRENT_EMOLYMENT:

create table if not exists CurrentEmployment(
EmployerPC char(16) not null,
StartDate date not null,
ClinicID int not null,
primary key(EmployerPC,StartDate,ClinicID),
foreign key(EmployerPC) references Employer(PC),
foreign key(ClinicID) references Clinic(ID),
Salary int
)engine=innoDB;

#PAST_EMPLOYMENT:

create table if not exists PastEmployment(
EmployerPC char(16) not null,
StartDate date not null,
ClinicID int not null,
primary key(EmployerPC,StartDate,ClinicID),
foreign key(EmployerPC) references Employer(PC),
foreign key(ClinicID) references Clinic(ID),
DismissalDate date
)engine=innoDB;

#DEPARTMENT:

create table if not exists Department(
ClinicID int not null,
SpecializationID int not null,
primary key(ClinicID,SpecializationID),
foreign key(ClinicID) references Clinic(ID),
foreign key(SpecializationID) references Specialization(ID),
PrimaryMedicEmployerPC char(16) not null,
foreign key(PrimaryMedicEmployerPC) references Medic(EmployerPC)
)engine=innoDB;

#WORKSCHEDULE:

create table WorkSchedule(
ID int primary key,
StartTime time not null,
EndTime time not null,
Date date,
dayoftheweek enum('MON','TUE',WED','THU','FRI','SAT','SUN'),
Type enum('Daily work schedule','Week daily work schedule')
)engine=innoDB;

#RESULT:

create table if not exists Result(
Date date not null,
ClinicID int not null,
MedicEmployerPC char(16) not null,
PatientPC char(16) not null,
primary key(Date, ClinicID, MedicEmployerPC, PatientPC),
foreign key(ClinicID) references Clinic(ID),
foreign key(MedicEmployerPC) references Medic(EmployerPC),
foreign key(PatientPC) references Patient(PC),
Document blob not null
)engine=innoDB;

#APPOINTMENTBOOKING:

create table if not exists AppointmentBooking(
DateTime datetime not null,
ClinicID int not null,
MedicEmployerPC char(16) not null,
primary key(DateTime,ClinicID,MedicEmplyerPC),
foreign key(ClinicID) references Clinic(ID),
foreign key(MedicEmployerPC) references Medic(EmployerPC),
PatientPC char(16),
foreign key(PatientPC) references Patient(PC)
)engine=innoDB;

#RELATIONSHIP:


#EMPLOYERSCHEDULE:

create table if not exists EmployerSchedule(
CurrEmployerPC char(16) not null,
CurrEmployerStartDate date not null,
CurrEmployerClinicID int not null,
WorkScheduleID int not null,
primary key(CurrEmployerPC,CurrEmployerStartDate,CurrEmployerClinicID,WorkScheduleID),
foreign key(CurrEmployerPC) references CurrentEmployment(EmployerPC),
foreign key(CurrEmployerStartDate) references CurrentEmployment(StartDate),
foreign key(CurrEmployerClinicID) references CurrentEmployment(ClinicID),
foreign key(WorkScheduleID) references WorkSchedule(ID)
)engine=innoDB;


#CLINICSCHEDULE:


create table if not exists ClinicSchedule(
ClinicID int not null,
WorkScheduleID int not null,
primary key(ClinicID,WorkScheduleID),
foreign key(ClinicID) references Clinic(ID),
foreign key(WorkScheduleID) references WorkSchedule(ID)
)engine=innoDB;


#DEPARTMENTCURRENTEMPLYMENT:


create table if not exists DepartmentCurrentEmployment(
CEEmployerPC char(16) not null,
CEStartDate date not null,
ClinicID int not null,
DepSpecializationID int not null,
primary key(CEEmployerPC,CEStartDate,ClinicID,DepSpecializationID),
foreign key(CEEmployerPC) references CurrentEmployment(EmployerPC),
foreign key(CEStartDate) references CurrentEmployment(StartDate),
foreign key(ClinicID) references Department(ClinicID),
foreign key(DepSpecializationID) references Department(SpecializationID)
)engine=innoDB;